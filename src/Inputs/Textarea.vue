<template>
    <div>
        <textarea :rows="rows" :placeholder="placeholder" @input="update" :class="{'resize-none': !resize}" class="shadow border-gray-300 rounded w-full focus:outline-none active:outline-none" v-text="modelValue" />
        <slot name="footer" :length="modelValue.length" v-if="modelValue">
            <p class="text-xs py-1 text-gray-400" v-if="max > 0">{{ modelValue.length }} / {{ max }}</p>
        </slot>
    </div>
</template>
<script>
export default {
    props: {
        resize: Boolean,
        modelValue: {
            type: String,
            default: ''
        },
        rows: {
            type: Number,
            default: 5
        },
        max: {
            type: Number,
            default: 0
        },
        placeholder: {
            default: 'Type something',
        }
    },
    methods: {
        update(event) {
            event.target.style.height = "auto";
            event.target.style.height = `${event.target.scrollHeight}px`;
            this.$emit('update:modelValue', event.target.value)
        },
    },
    mounted() {
        // this.$nextTick(() => {
        //     this.$el.setAttribute(
        //         "style",
        //         "height",
        //         `${this.$el.scrollHeight}px`
        //     );
        // });
    },
}
</script>
